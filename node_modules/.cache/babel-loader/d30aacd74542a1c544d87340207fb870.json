{"ast":null,"code":"var _jsxFileName = \"/home/ragnar/sms-app/sms-app/src/components/sendMessageUI.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport { Grid, TextField } from '@mui/material';\nimport { useParams } from 'react-router-dom';\nimport Button from '@mui/material/Button';\nimport SendIcon from '@mui/icons-material/Send';\nimport axios from 'axios';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SendMessageUi(props) {\n  _s();\n\n  const {\n    phoneno\n  } = useParams();\n  let data = JSON.parse(localStorage.getItem('data'));\n  const user = data.filter(ele => ele.phoneno == phoneno)[0];\n  const rand = Math.floor(Math.random() * 1000000);\n  const [value, setValue] = useState('Your OTP number is ' + rand);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    setLoading(loading);\n  }, [loading]);\n\n  const handleChangeOtp = () => {\n    setValue('Your OTP number is ' + Math.floor(Math.random() * 1000000));\n  };\n\n  const handleSend = async () => {\n    const body = {\n      message: value,\n      phoneno: user.phoneno\n    };\n    const id = toast.loading(\"Please wait...\");\n    setLoading(true);\n    await axios.post('/send', body).then(res => {\n      console.log(res.data);\n\n      if (res.data.error) {\n        console.log(res.data);\n\n        if (res.data.error.code == 21608) {\n          toast.update(id, {\n            render: \"Sorry 🥲🥲 can't send, the number is not verified\",\n            type: \"error\",\n            isLoading: false,\n            autoClose: true\n          });\n        } else {\n          toast.update(id, {\n            render: \"Something went wrong 🤦‍♂️🤦‍♂️\",\n            type: \"error\",\n            isLoading: false,\n            autoClose: true\n          });\n        }\n      } else {\n        toast.update(id, {\n          render: \"Message has been send successfully 🙌🙌\",\n          type: \"success\",\n          isLoading: false,\n          autoClose: true\n        });\n        let history = JSON.parse(localStorage.getItem('history'));\n\n        if (history) {\n          const messageData = {\n            contact: user.fname + \" \" + user.lname,\n            message: res.data.res.body,\n            date: res.data.res.dateCreated,\n            from: res.data.res.from,\n            to: user.phoneno\n          };\n          history.push(messageData);\n          localStorage.setItem('history', JSON.stringify(history));\n        } else {\n          let history = [];\n          const messageData = {\n            contact: user.fname + \" \" + user.lname,\n            message: res.data.res.body,\n            date: res.data.res.dateCreated,\n            from: res.data.res.from,\n            to: user.phoneno\n          };\n          history.push(messageData);\n          localStorage.setItem('history', JSON.stringify(history));\n        }\n      }\n    }).catch(error => {\n      console.log(error);\n      toast.update(id, {\n        render: \"Something went wrong 🤦‍♂️🤦‍♂️\",\n        type: \"error\",\n        isLoading: false,\n        autoClose: true\n      });\n    });\n    setLoading(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      maxWidth: \"100%\",\n      minHeight: \"100%\",\n      borderRadius: 5\n    },\n    elevation: 8,\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 1,\n        direction: \"column\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-multiline-flexible\",\n            label: \"Message \",\n            multiline: true,\n            fullWidth: true,\n            minRows: 8,\n            value: value,\n            onChange: e => setValue(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        sx: {\n          marginTop: 3,\n          textAlign: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          endIcon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 58\n          }, this),\n          onClick: handleSend,\n          disabled: loading,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"text\",\n          onClick: handleChangeOtp,\n          disabled: loading,\n          children: \"change Otp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SendMessageUi, \"/r5SeAMSz8z5Jw1LYoO4+t9es4k=\", false, function () {\n  return [useParams];\n});\n\n_c = SendMessageUi;\n\nvar _c;\n\n$RefreshReg$(_c, \"SendMessageUi\");","map":{"version":3,"names":["useState","useEffect","Card","CardContent","Grid","TextField","useParams","Button","SendIcon","axios","ToastContainer","toast","SendMessageUi","props","phoneno","data","JSON","parse","localStorage","getItem","user","filter","ele","rand","Math","floor","random","value","setValue","loading","setLoading","handleChangeOtp","handleSend","body","message","id","post","then","res","console","log","error","code","update","render","type","isLoading","autoClose","history","messageData","contact","fname","lname","date","dateCreated","from","to","push","setItem","stringify","catch","maxWidth","minHeight","borderRadius","e","target","marginTop","textAlign"],"sources":["/home/ragnar/sms-app/sms-app/src/components/sendMessageUI.js"],"sourcesContent":["import { useState,useEffect } from 'react';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport { Grid, TextField } from '@mui/material';\nimport { useParams } from 'react-router-dom'\nimport Button from '@mui/material/Button';\nimport SendIcon from '@mui/icons-material/Send';\nimport axios from 'axios'\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\n\n\nexport default function SendMessageUi(props) {\n    const { phoneno } = useParams()\n    let data = JSON.parse(localStorage.getItem('data'))\n    const user = data.filter((ele) => ele.phoneno == phoneno)[0]\n    const rand = Math.floor(Math.random()*1000000)\n    const [value, setValue] = useState('Your OTP number is '+rand)\n    const [loading,setLoading]=useState(false)\n    useEffect(()=>{\n        setLoading(loading)\n    },[loading])\n\n    const handleChangeOtp=()=>{\n        setValue('Your OTP number is '+Math.floor(Math.random()*1000000))\n    }\n\n    const handleSend = async() => {\n        const body = {\n            message: value,\n            phoneno: user.phoneno\n        }\n        const id = toast.loading(\"Please wait...\")\n        setLoading(true)\n        await axios.post('/send', body).then(res => {\n            console.log(res.data)\n            if (res.data.error) {\n                console.log(res.data)\n                if (res.data.error.code == 21608) {\n                    toast.update(id, { render: \"Sorry 🥲🥲 can't send, the number is not verified\", type: \"error\", isLoading: false, autoClose: true });\n                }\n                else {\n                    toast.update(id, { render: \"Something went wrong 🤦‍♂️🤦‍♂️\", type: \"error\", isLoading: false, autoClose: true });\n                }\n            }\n            else {\n                toast.update(id, { render: \"Message has been send successfully 🙌🙌\", type: \"success\", isLoading: false, autoClose: true });\n                let history = JSON.parse(localStorage.getItem('history'))\n                if(history){\n                    const messageData={\n                        contact:user.fname+\" \"+user.lname,\n                        message:res.data.res.body,\n                        date:res.data.res.dateCreated,\n                        from:res.data.res.from,\n                        to:user.phoneno\n                    }\n                    history.push(messageData)\n                    localStorage.setItem('history',JSON.stringify(history))\n                }\n                else{\n                    let history =[]\n                    const messageData={\n                        contact:user.fname+\" \"+user.lname,\n                        message:res.data.res.body,\n                        date:res.data.res.dateCreated,\n                        from:res.data.res.from,\n                        to:user.phoneno\n                    }\n                    history.push(messageData)\n            \n                    localStorage.setItem('history',JSON.stringify(history))\n                }\n            }\n        })\n            .catch(error => {\n                console.log(error)\n                toast.update(id, { render: \"Something went wrong 🤦‍♂️🤦‍♂️\", type: \"error\", isLoading: false, autoClose: true });\n            })\n        setLoading(false)\n    }\n    return (\n        <Card sx={{ maxWidth: \"100%\",minHeight:\"100%\",borderRadius:5 }} elevation={8}>\n            <ToastContainer />\n            <CardContent >\n                <Grid container spacing={1} direction=\"column\">\n                    <Grid item xs={12}>\n                        <TextField\n                            id=\"outlined-multiline-flexible\"\n                            label=\"Message \"\n                            multiline\n                            fullWidth={true}\n                            minRows={8}\n                            value={value}\n                            onChange={(e) => setValue(e.target.value)}\n                        />\n                    </Grid>\n                </Grid>\n                <Grid item sx={{ marginTop: 3, textAlign: \"center\" }}>\n                    <Button variant=\"contained\" endIcon={<SendIcon />} onClick={handleSend} disabled={loading} >\n                        Send\n                    </Button>\n                    <Button variant=\"text\" onClick={handleChangeOtp} disabled={loading} >\n                        change Otp\n                    </Button>\n                </Grid>\n            </CardContent>\n        </Card>\n    );\n}\n\n"],"mappings":";;;AAAA,SAASA,QAAT,EAAkBC,SAAlB,QAAmC,OAAnC;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,SAASC,IAAT,EAAeC,SAAf,QAAgC,eAAhC;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAO,uCAAP;;AAIA,eAAe,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;EAAA;;EACzC,MAAM;IAAEC;EAAF,IAAcR,SAAS,EAA7B;EACA,IAAIS,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;EACA,MAAMC,IAAI,GAAGL,IAAI,CAACM,MAAL,CAAaC,GAAD,IAASA,GAAG,CAACR,OAAJ,IAAeA,OAApC,EAA6C,CAA7C,CAAb;EACA,MAAMS,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAc,OAAzB,CAAb;EACA,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoB5B,QAAQ,CAAC,wBAAsBuB,IAAvB,CAAlC;EACA,MAAM,CAACM,OAAD,EAASC,UAAT,IAAqB9B,QAAQ,CAAC,KAAD,CAAnC;EACAC,SAAS,CAAC,MAAI;IACV6B,UAAU,CAACD,OAAD,CAAV;EACH,CAFQ,EAEP,CAACA,OAAD,CAFO,CAAT;;EAIA,MAAME,eAAe,GAAC,MAAI;IACtBH,QAAQ,CAAC,wBAAsBJ,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAc,OAAzB,CAAvB,CAAR;EACH,CAFD;;EAIA,MAAMM,UAAU,GAAG,YAAW;IAC1B,MAAMC,IAAI,GAAG;MACTC,OAAO,EAAEP,KADA;MAETb,OAAO,EAAEM,IAAI,CAACN;IAFL,CAAb;IAIA,MAAMqB,EAAE,GAAGxB,KAAK,CAACkB,OAAN,CAAc,gBAAd,CAAX;IACAC,UAAU,CAAC,IAAD,CAAV;IACA,MAAMrB,KAAK,CAAC2B,IAAN,CAAW,OAAX,EAAoBH,IAApB,EAA0BI,IAA1B,CAA+BC,GAAG,IAAI;MACxCC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACvB,IAAhB;;MACA,IAAIuB,GAAG,CAACvB,IAAJ,CAAS0B,KAAb,EAAoB;QAChBF,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACvB,IAAhB;;QACA,IAAIuB,GAAG,CAACvB,IAAJ,CAAS0B,KAAT,CAAeC,IAAf,IAAuB,KAA3B,EAAkC;UAC9B/B,KAAK,CAACgC,MAAN,CAAaR,EAAb,EAAiB;YAAES,MAAM,EAAE,mDAAV;YAA+DC,IAAI,EAAE,OAArE;YAA8EC,SAAS,EAAE,KAAzF;YAAgGC,SAAS,EAAE;UAA3G,CAAjB;QACH,CAFD,MAGK;UACDpC,KAAK,CAACgC,MAAN,CAAaR,EAAb,EAAiB;YAAES,MAAM,EAAE,iCAAV;YAA6CC,IAAI,EAAE,OAAnD;YAA4DC,SAAS,EAAE,KAAvE;YAA8EC,SAAS,EAAE;UAAzF,CAAjB;QACH;MACJ,CARD,MASK;QACDpC,KAAK,CAACgC,MAAN,CAAaR,EAAb,EAAiB;UAAES,MAAM,EAAE,yCAAV;UAAqDC,IAAI,EAAE,SAA3D;UAAsEC,SAAS,EAAE,KAAjF;UAAwFC,SAAS,EAAE;QAAnG,CAAjB;QACA,IAAIC,OAAO,GAAGhC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAd;;QACA,IAAG6B,OAAH,EAAW;UACP,MAAMC,WAAW,GAAC;YACdC,OAAO,EAAC9B,IAAI,CAAC+B,KAAL,GAAW,GAAX,GAAe/B,IAAI,CAACgC,KADd;YAEdlB,OAAO,EAACI,GAAG,CAACvB,IAAJ,CAASuB,GAAT,CAAaL,IAFP;YAGdoB,IAAI,EAACf,GAAG,CAACvB,IAAJ,CAASuB,GAAT,CAAagB,WAHJ;YAIdC,IAAI,EAACjB,GAAG,CAACvB,IAAJ,CAASuB,GAAT,CAAaiB,IAJJ;YAKdC,EAAE,EAACpC,IAAI,CAACN;UALM,CAAlB;UAOAkC,OAAO,CAACS,IAAR,CAAaR,WAAb;UACA/B,YAAY,CAACwC,OAAb,CAAqB,SAArB,EAA+B1C,IAAI,CAAC2C,SAAL,CAAeX,OAAf,CAA/B;QACH,CAVD,MAWI;UACA,IAAIA,OAAO,GAAE,EAAb;UACA,MAAMC,WAAW,GAAC;YACdC,OAAO,EAAC9B,IAAI,CAAC+B,KAAL,GAAW,GAAX,GAAe/B,IAAI,CAACgC,KADd;YAEdlB,OAAO,EAACI,GAAG,CAACvB,IAAJ,CAASuB,GAAT,CAAaL,IAFP;YAGdoB,IAAI,EAACf,GAAG,CAACvB,IAAJ,CAASuB,GAAT,CAAagB,WAHJ;YAIdC,IAAI,EAACjB,GAAG,CAACvB,IAAJ,CAASuB,GAAT,CAAaiB,IAJJ;YAKdC,EAAE,EAACpC,IAAI,CAACN;UALM,CAAlB;UAOAkC,OAAO,CAACS,IAAR,CAAaR,WAAb;UAEA/B,YAAY,CAACwC,OAAb,CAAqB,SAArB,EAA+B1C,IAAI,CAAC2C,SAAL,CAAeX,OAAf,CAA/B;QACH;MACJ;IACJ,CAvCK,EAwCDY,KAxCC,CAwCKnB,KAAK,IAAI;MACZF,OAAO,CAACC,GAAR,CAAYC,KAAZ;MACA9B,KAAK,CAACgC,MAAN,CAAaR,EAAb,EAAiB;QAAES,MAAM,EAAE,iCAAV;QAA6CC,IAAI,EAAE,OAAnD;QAA4DC,SAAS,EAAE,KAAvE;QAA8EC,SAAS,EAAE;MAAzF,CAAjB;IACH,CA3CC,CAAN;IA4CAjB,UAAU,CAAC,KAAD,CAAV;EACH,CApDD;;EAqDA,oBACI,QAAC,IAAD;IAAM,EAAE,EAAE;MAAE+B,QAAQ,EAAE,MAAZ;MAAmBC,SAAS,EAAC,MAA7B;MAAoCC,YAAY,EAAC;IAAjD,CAAV;IAAgE,SAAS,EAAE,CAA3E;IAAA,wBACI,QAAC,cAAD;MAAA;MAAA;MAAA;IAAA,QADJ,eAEI,QAAC,WAAD;MAAA,wBACI,QAAC,IAAD;QAAM,SAAS,MAAf;QAAgB,OAAO,EAAE,CAAzB;QAA4B,SAAS,EAAC,QAAtC;QAAA,uBACI,QAAC,IAAD;UAAM,IAAI,MAAV;UAAW,EAAE,EAAE,EAAf;UAAA,uBACI,QAAC,SAAD;YACI,EAAE,EAAC,6BADP;YAEI,KAAK,EAAC,UAFV;YAGI,SAAS,MAHb;YAII,SAAS,EAAE,IAJf;YAKI,OAAO,EAAE,CALb;YAMI,KAAK,EAAEpC,KANX;YAOI,QAAQ,EAAGqC,CAAD,IAAOpC,QAAQ,CAACoC,CAAC,CAACC,MAAF,CAAStC,KAAV;UAP7B;YAAA;YAAA;YAAA;UAAA;QADJ;UAAA;UAAA;UAAA;QAAA;MADJ;QAAA;QAAA;QAAA;MAAA,QADJ,eAcI,QAAC,IAAD;QAAM,IAAI,MAAV;QAAW,EAAE,EAAE;UAAEuC,SAAS,EAAE,CAAb;UAAgBC,SAAS,EAAE;QAA3B,CAAf;QAAA,wBACI,QAAC,MAAD;UAAQ,OAAO,EAAC,WAAhB;UAA4B,OAAO,eAAE,QAAC,QAAD;YAAA;YAAA;YAAA;UAAA,QAArC;UAAmD,OAAO,EAAEnC,UAA5D;UAAwE,QAAQ,EAAEH,OAAlF;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADJ,eAII,QAAC,MAAD;UAAQ,OAAO,EAAC,MAAhB;UAAuB,OAAO,EAAEE,eAAhC;UAAiD,QAAQ,EAAEF,OAA3D;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAJJ;MAAA;QAAA;QAAA;QAAA;MAAA,QAdJ;IAAA;MAAA;MAAA;MAAA;IAAA,QAFJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AA4BH;;GAhGuBjB,a;UACAN,S;;;KADAM,a"},"metadata":{},"sourceType":"module"}